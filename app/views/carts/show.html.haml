#cart_show
  %h1 My Cart

  - if @cart.boxes.length > 0
    %table
      - @cart.boxes.each do |box|
        %tr
          %td= "#{box.gender_noun} #{box.size} from #{box.user.name}"
          %td= link_to 'Show', box
          %td= link_to 'Remove from cart', cart_remove_path(:box_id => box.id), :method => :put
          %td= number_to_currency box.price_total
      %tr.total
        %td Total
        %td
        %td
        %td= number_to_currency @cart.price_total


    %br

    .row
      .six.columns
        %h3 Shipping Address
        - if current_user.address
          #address_info_wrapper
            = render 'users/address', :address => current_user.address
            = link_to 'Edit Shipping Address', edit_user_information_path, :class => "toggle_edit_address"
          #address_form_wrapper.hide
            = link_to 'Cancel', '#', :class => 'toggle_edit_address'
            = render "users/address_form"
        - else
          #address_form_wrapper
            = render "users/address_form"
      .six.columns
        %h3 Payment Information
        - if current_user.stripe
          #card_info_wrapper
            %div= "Using #{current_user.stripe.active_card['type']} ending with #{current_user.stripe.active_card['last4']}"
            = link_to 'Edit Payment Information', edit_user_information_path, :class => "toggle_edit_payment"
          #card_form_wrapper.hide
            = link_to 'Cancel', '#', :class => 'toggle_edit_payment'
            = render "users/stripe_card_form"
        - else
          #card_form_wrapper
            = render "users/stripe_card_form"

        - if current_user.address && current_user.stripe
          = link_to 'Complete Purchase!', orders_path, :method => :post, :class => "buy medium action button"

  - else
    .empty-cart You haven't added any boxes to your cart!